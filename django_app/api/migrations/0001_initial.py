# Generated by Django 5.2.6 on 2025-12-15 23:34

import api.models.ads
import api.models.entities
import django.core.files.storage
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('admin_panel', '0001_initial'),
        ('telegram', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AdTargetEntity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(blank=True, max_length=255, null=True, verbose_name='Название')),
                ('telegram_id', models.BigIntegerField(blank=True, null=True, verbose_name='Telegram ID')),
                ('link', models.CharField(blank=True, max_length=255, null=True, verbose_name='Ссылка (@ или t.me/...)')),
                ('description', models.TextField(blank=True, null=True, verbose_name='Описание')),
                ('entity_type', models.CharField(blank=True, choices=[('channel', 'Канал'), ('group', 'Группа')], max_length=16, null=True, verbose_name='Тип (канал/группа)')),
                ('photo', models.ImageField(blank=True, null=True, storage=django.core.files.storage.FileSystemStorage(base_url='/avatars/', location='/app/avatars'), upload_to=api.models.ads.ad_target_photo_path, verbose_name='Фото')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Рекламная цель',
                'verbose_name_plural': 'Рекламные цели',
                'db_table': 'api_adtargetentity',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BoosterSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Выключить/включить все тарифы')),
                ('api_key', models.CharField(max_length=128, verbose_name='API ключ')),
                ('url', models.URLField(blank=True, default='https://twiboost.com', verbose_name='Ссылка на биржу')),
                ('balance_alert_limit', models.IntegerField(default=0, verbose_name='Баланс оповещения')),
                ('is_balance_notify', models.BooleanField(default=False, verbose_name='Включение оповещений о низком балансе')),
                ('balance', models.DecimalField(decimal_places=2, default=0, max_digits=12, verbose_name='Баланс на бирже')),
                ('last_balance_check', models.DateTimeField(blank=True, null=True, verbose_name='Дата последней проверки баланса')),
                ('new_views_service_id', models.IntegerField(default=0, verbose_name='ID сервиса новых просмотров')),
                ('old_views_service_id', models.IntegerField(default=0, verbose_name='ID сервиса старых просмотров')),
                ('subscribers_service_id', models.IntegerField(default=0, verbose_name='ID сервиса подписчиков')),
                ('is_active_new_views', models.BooleanField(default=False, verbose_name='Модуль: новые просмотры активен')),
                ('is_active_old_views', models.BooleanField(default=False, verbose_name='Модуль: старые просмотры активен')),
                ('is_active_subscribers', models.BooleanField(default=False, verbose_name='Модуль: подписчики активен')),
                ('min_new_views', models.IntegerField(default=0, verbose_name='Мин. новые просмотры')),
                ('min_old_views', models.IntegerField(default=0, verbose_name='Мин. старые просмотры')),
                ('min_subscribers', models.IntegerField(default=0, verbose_name='Мин. подписчики')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
            ],
            options={
                'verbose_name': 'Настройки бустера',
                'verbose_name_plural': 'Настройки бустера',
                'db_table': 'booster_settings',
            },
        ),
        migrations.CreateModel(
            name='ChannelTaskGroup',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='NotificationModule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=10, unique=True, verbose_name='Код модуля')),
                ('name', models.CharField(max_length=100, verbose_name='Название модуля')),
                ('module_type', models.CharField(choices=[('CHANNEL_POST', 'Каналы/публикации'), ('GROUP_POST', 'Группы/публикации'), ('PARSER', 'Парсер'), ('BLONDINKA', 'Бот-Блондинка'), ('SUBSCRIBERS', 'Нормализатор подписчиков'), ('VIEWS', 'Просмотры'), ('REACTIONS', 'Реакции'), ('SYNC', 'Синхронизация'), ('ADS', 'Реклама'), ('SYSTEM', 'Система')], max_length=20)),
                ('description', models.TextField(blank=True, verbose_name='Описание')),
                ('is_active', models.BooleanField(default=True)),
            ],
        ),
        migrations.CreateModel(
            name='ViewDistribution',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('morning_distribution', models.JSONField(default=dict, verbose_name='Распределение утренних постов')),
                ('day_distribution', models.JSONField(default=dict, verbose_name='Распределение дневных постов')),
                ('evening_distribution', models.JSONField(default=dict, verbose_name='Распределение вечерних постов')),
                ('night_distribution', models.JSONField(default=dict, verbose_name='Распределение ночных постов')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
            ],
            options={
                'verbose_name': 'Распределение просмотров',
                'verbose_name_plural': 'Распределения просмотров',
                'db_table': 'view_boost_distributions',
            },
        ),
        migrations.CreateModel(
            name='BlondinkaTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('run_now', models.BooleanField(default=False, verbose_name='Запустить сейчас')),
                ('owner_type', models.CharField(choices=[('own', 'Своя'), ('foreign', 'Чужая')], default='own', max_length=20, verbose_name='Чья группа')),
                ('delete_post_after', models.IntegerField(blank=True, choices=[(24, 'Сутки'), (48, '2 суток'), (72, '3 суток'), (None, 'Не удалять')], null=True, verbose_name='Удалять пост через')),
                ('working_days', models.JSONField(default=list, verbose_name='Дни работы')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='blondinka_tasks', to='telegram.botsession', verbose_name='Бот')),
            ],
            options={
                'verbose_name': 'Задача бота-блондинки',
                'verbose_name_plural': 'Задачи бота-блондинки',
                'db_table': 'blondinka_tasks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BlondinkaLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('post_content', models.TextField(verbose_name='Содержание поста')),
                ('post_url', models.CharField(blank=True, max_length=512, null=True, verbose_name='Ссылка на пост')),
                ('is_success', models.BooleanField(default=True, verbose_name='Успешно')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='Ошибка')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='logs', to='api.blondinkatask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Лог бота-блондинки',
                'verbose_name_plural': 'Логи бота-блондинки',
                'db_table': 'blondinka_logs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BoosterOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('task_id', models.BigIntegerField(verbose_name='ID задачи')),
                ('task_type', models.CharField(choices=[('new_views', 'Новые просмотры'), ('old_views', 'Старые просмотры'), ('subscribers', 'Подписчики')], max_length=20, verbose_name='Тип задачи')),
                ('external_order_id', models.CharField(max_length=50, verbose_name='ID заказа во внешней системе')),
                ('service_id', models.IntegerField(verbose_name='ID сервиса накрутки')),
                ('status', models.CharField(choices=[('pending', 'Ожидает'), ('in_progress', 'В процессе'), ('completed', 'Завершён'), ('failed', 'Ошибка')], default='pending', max_length=20, verbose_name='Статус')),
                ('api_response', models.JSONField(blank=True, null=True, verbose_name='Последний ответ от API')),
                ('quantity', models.IntegerField(verbose_name='Количество')),
                ('price', models.FloatField(verbose_name='Стоимость')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Завершено')),
                ('expense_id', models.BigIntegerField(blank=True, null=True, verbose_name='ID расхода')),
            ],
            options={
                'verbose_name': 'Заказ на накрутку',
                'verbose_name_plural': 'Заказы на накрутку',
                'db_table': 'booster_orders',
                'indexes': [models.Index(fields=['external_order_id'], name='booster_ord_externa_498520_idx'), models.Index(fields=['service_id', 'status'], name='booster_ord_service_b1e44f_idx'), models.Index(fields=['task_id', 'task_type'], name='booster_ord_task_id_58a77c_idx')],
            },
        ),
        migrations.CreateModel(
            name='BoosterServiceRotation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('module', models.CharField(choices=[('new_views', 'Новые просмотры'), ('old_views', 'Старые просмотры'), ('subscribers', 'Подписчики')], max_length=20, verbose_name='Модуль')),
                ('service_type', models.CharField(blank=True, choices=[('new_views', 'Новые просмотры'), ('old_views', 'Старые просмотры'), ('subscribers', 'Подписчики')], default='', max_length=20, verbose_name='Тип сервиса')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активен')),
                ('last_used_tariff_id', models.IntegerField(default=0, verbose_name='ID последнего использованного тарифа')),
                ('default_service_id', models.IntegerField(default=0, verbose_name='ID сервиса по умолчанию')),
                ('active_orders_cache', models.JSONField(default=dict, verbose_name='Кэш активных заказов')),
                ('last_orders_check', models.DateTimeField(blank=True, null=True, verbose_name='Время последней проверки заказов')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
            ],
            options={
                'verbose_name': 'Ротация сервисов бустера',
                'verbose_name_plural': 'Ротации сервисов бустера',
                'db_table': 'booster_service_rotation',
                'unique_together': {('module',)},
            },
        ),
        migrations.CreateModel(
            name='BoosterTariff',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('module', models.CharField(choices=[('old_views', 'Просмотры старых постов'), ('new_views', 'Умные просмотры новых постов'), ('subscribers', 'Подписчики каналов-групп')], max_length=32, verbose_name='Модуль')),
                ('comment', models.CharField(default=' ', null=True, verbose_name='Комментарий')),
                ('service_id', models.IntegerField(default=0, verbose_name='ID тарифа')),
                ('min_limit', models.IntegerField(default=0, verbose_name='Минимум')),
                ('price_per_1000', models.FloatField(default=0, verbose_name='Цена за 1000')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активен')),
                ('is_primary', models.BooleanField(default=False, verbose_name='Основной тариф')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('booster', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tariffs', to='api.boostersettings', verbose_name='Настройки бустера')),
            ],
            options={
                'verbose_name': 'Тариф бустера',
                'verbose_name_plural': 'Тарифы бустера',
                'db_table': 'booster_tariffs',
                'ordering': ['module', 'min_limit'],
            },
        ),
        migrations.CreateModel(
            name='ChannelSyncTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('target_posts_count', models.PositiveIntegerField(default=0, verbose_name='Количество постов в цели')),
                ('scheduled_time', models.TimeField(default=django.utils.timezone.now, verbose_name='Время запуска по расписанию')),
                ('update_period_days', models.IntegerField(blank=True, choices=[(7, 'Неделю'), (14, 'Две недели'), (30, 'Месяц'), (None, 'Никогда')], null=True, verbose_name='Период актуализации')),
                ('update_range', models.CharField(choices=[('new_only', 'Только новые'), ('full', 'Весь канал')], default='new_only', max_length=20, verbose_name='Диапазон актуализации')),
                ('run_once_task', models.BooleanField(default=False, verbose_name='Немедленная синхронизация')),
                ('source_subscribers_count', models.IntegerField(default=0, verbose_name='Количество подписчиков источника')),
                ('last_sync_date', models.DateTimeField(blank=True, null=True, verbose_name='Дата последней синхронизации')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='channel_sync_tasks', to='telegram.botsession', verbose_name='Бот')),
            ],
            options={
                'verbose_name': 'Задача синхронизации каналов',
                'verbose_name_plural': 'Задачи синхронизации каналов',
                'db_table': 'channel_sync_tasks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ChannelSyncProgress',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_posts_to_copy', models.IntegerField(default=0, verbose_name='Всего постов для копирования')),
                ('copied_posts', models.IntegerField(default=0, verbose_name='Скопировано постов')),
                ('last_copied_message_id', models.BigIntegerField(blank=True, null=True, verbose_name='ID последнего скопированного сообщения')),
                ('is_completed', models.BooleanField(default=False, verbose_name='Завершено')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='Начато')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Завершено')),
                ('task', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='progress', to='api.channelsynctask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Прогресс синхронизации',
                'verbose_name_plural': 'Прогрессы синхронизации',
                'db_table': 'channel_sync_progress',
            },
        ),
        migrations.CreateModel(
            name='ChannelSyncHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sync_date', models.DateTimeField(auto_now_add=True, verbose_name='Дата синхронизации')),
                ('posts_before', models.IntegerField(default=0, verbose_name='Постов до')),
                ('posts_after', models.IntegerField(default=0, verbose_name='Постов после')),
                ('source_subscribers_count', models.IntegerField(default=0, verbose_name='Подписчиков источника')),
                ('last_post_url', models.URLField(blank=True, null=True, verbose_name='URL последнего поста')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='history', to='api.channelsynctask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'История синхронизации',
                'verbose_name_plural': 'История синхронизации',
                'db_table': 'channel_sync_history',
                'ordering': ['-sync_date'],
            },
        ),
        migrations.CreateModel(
            name='EntityCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('theme_url', models.URLField(help_text='Обязательный URL темы для этой связи', max_length=500, verbose_name='URL темы')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='category_entity_links', to='admin_panel.category')),
            ],
            options={
                'verbose_name': 'Связь Entity-Category',
                'verbose_name_plural': 'Связи Entity-Category',
                'db_table': 'main_entity_category_links',
            },
        ),
        migrations.CreateModel(
            name='GroupTheme',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='theme', to='admin_panel.category')),
            ],
            options={
                'verbose_name': 'Тема группы',
                'verbose_name_plural': 'Темы групп',
                'db_table': 'blondinka_group_themes',
            },
        ),
        migrations.AddField(
            model_name='blondinkatask',
            name='group_theme',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tasks', to='api.grouptheme', verbose_name='Тема группы'),
        ),
        migrations.CreateModel(
            name='BlondinkaDialog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('message', models.TextField(verbose_name='Текст сообщения')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активно')),
                ('order', models.PositiveIntegerField(default=0, verbose_name='Порядок')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('theme', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dialogs', to='api.grouptheme', verbose_name='Тема')),
            ],
            options={
                'verbose_name': 'Диалог бота',
                'verbose_name_plural': 'Диалоги бота',
                'db_table': 'blondinka_dialogs',
                'ordering': ['theme', 'order'],
            },
        ),
        migrations.CreateModel(
            name='MainEntity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('order', models.IntegerField(blank=True, help_text='Приоритет сортировки', null=True)),
                ('telegram_id', models.BigIntegerField(unique=True)),
                ('entity_type', models.CharField(choices=[('channel', 'Канал'), ('group', 'Группа')], max_length=16)),
                ('destination_type', models.CharField(blank=True, choices=[('draft', 'Библиотека'), ('all', 'Все'), ('main', 'Основной')], max_length=16, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('owner', models.CharField(blank=True, max_length=32, null=True)),
                ('link', models.CharField(blank=True, max_length=255, null=True)),
                ('publish_link', models.CharField(blank=True, max_length=255, null=True)),
                ('tags', models.CharField(blank=True, max_length=255, null=True)),
                ('text_suffix', models.CharField(blank=True, max_length=1024, null=True)),
                ('is_add_suffix', models.BooleanField(default=True)),
                ('cached_task_count', models.PositiveIntegerField(default=0)),
                ('cached_task_updated', models.DateTimeField(blank=True, null=True)),
                ('photo', models.ImageField(blank=True, null=True, storage=django.core.files.storage.FileSystemStorage(base_url='/avatars/', location='/app/avatars'), upload_to=api.models.entities.group_photo_path)),
                ('categories', models.ManyToManyField(related_name='entity_categories', through='api.EntityCategory', to='admin_panel.category')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='entities', to='admin_panel.category')),
                ('country', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='entities', to='admin_panel.country')),
            ],
        ),
        migrations.CreateModel(
            name='EntityPostTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True)),
                ('is_global_active', models.BooleanField(default=True)),
                ('choice_mode', models.CharField(choices=[('random', 'Случайно'), ('sequential', 'Последовательно')], default='random', max_length=20)),
                ('after_publish', models.CharField(choices=[('remove', 'Удалять'), ('cycle', 'Циклировать')], default='cycle', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='channel_tasks', to='telegram.botsession')),
                ('group', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subtasks', to='api.channeltaskgroup')),
                ('source', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='source_tasks', to='api.mainentity')),
                ('target', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='target_tasks', to='api.mainentity')),
            ],
        ),
        migrations.AddField(
            model_name='entitycategory',
            name='entity',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='entity_category_links', to='api.mainentity'),
        ),
        migrations.AddField(
            model_name='channelsynctask',
            name='source',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='channel_sync_source_tasks', to='api.mainentity', verbose_name='Канал-Источник'),
        ),
        migrations.AddField(
            model_name='channelsynctask',
            name='target',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='channel_sync_target_tasks', to='api.mainentity', verbose_name='Канал-Библиотека'),
        ),
        migrations.AddField(
            model_name='blondinkatask',
            name='group',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='blondinka_tasks', to='api.mainentity', verbose_name='Группа'),
        ),
        migrations.CreateModel(
            name='AdsOrder',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('is_paid', models.BooleanField(default=False, verbose_name='Оплачен')),
                ('name', models.CharField(max_length=255, verbose_name='Название задачи')),
                ('post_link', models.CharField(max_length=512, verbose_name='Ссылка на пост (t.me/...)')),
                ('customer_telegram', models.CharField(max_length=64, verbose_name='Телеграм заказчика')),
                ('customer_fullname', models.CharField(blank=True, max_length=255, null=True, verbose_name='ФИО заказчика')),
                ('customer_status', models.CharField(choices=[('permanent', 'Постоянный'), ('new', 'Новый')], default='new', max_length=16, verbose_name='Статус заказчика')),
                ('notify_customer', models.BooleanField(default=True, verbose_name='Уведомлять заказчика')),
                ('notify_admin', models.BooleanField(default=True, verbose_name='Уведомлять администратора')),
                ('ordered_at', models.DateTimeField(default=django.utils.timezone.now, verbose_name='Дата заказа')),
                ('publish_at', models.DateTimeField(verbose_name='Дата публикации')),
                ('published_at', models.DateTimeField(blank=True, null=True, verbose_name='Фактическая дата публикации')),
                ('pinned_at', models.DateTimeField(blank=True, null=True, verbose_name='Фактическая дата закрепления')),
                ('unpinned_at', models.DateTimeField(blank=True, null=True, verbose_name='Фактическая дата открепления')),
                ('deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Фактическая дата удаления')),
                ('target_message_id', models.BigIntegerField(blank=True, null=True, verbose_name='ID сообщения в цели')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ads_orders', to='telegram.botsession', verbose_name='Бот')),
                ('source', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ads_orders', to='api.adtargetentity', verbose_name='Локальные данные цели')),
                ('target', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ads_orders', to='api.mainentity', verbose_name='Группа/Канал-цель')),
            ],
            options={
                'verbose_name': 'Рекламная публикация',
                'verbose_name_plural': 'Рекламные публикации',
                'db_table': 'api_adsorder',
                'ordering': ['-ordered_at'],
            },
        ),
        migrations.CreateModel(
            name='NotificationType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('code', models.CharField(max_length=10, verbose_name='Код типа')),
                ('name', models.CharField(max_length=100, verbose_name='Название типа')),
                ('severity', models.IntegerField(choices=[(10, 'DEBUG'), (20, 'INFO'), (30, 'WARNING'), (40, 'ERROR'), (50, 'CRITICAL')], default=30)),
                ('description', models.TextField(blank=True, verbose_name='Описание')),
                ('auto_resolve', models.BooleanField(default=False, verbose_name='Авто-решение')),
                ('auto_resolve_minutes', models.IntegerField(default=0, verbose_name='Авто-решение через (мин)')),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.notificationmodule')),
            ],
        ),
        migrations.CreateModel(
            name='OldViewsTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('normalization_mode', models.CharField(choices=[('monthly', '1 раз в месяц'), ('bi_monthly', '2 раза в месяц'), ('weekly', '1 раз в неделю'), ('bi_weekly', '2 раза в неделю'), ('daily', 'Ежедневно')], default='monthly', max_length=20, verbose_name='Период нормализации')),
                ('normalization_time', models.TimeField(default='00:00', verbose_name='Время запуска')),
                ('run_once', models.BooleanField(default=False, verbose_name='Запустить разово')),
                ('exclude_period', models.CharField(choices=[('1_day', '1 сут'), ('2_days', '2 сут'), ('1_week', '1 неделя'), ('2_weeks', '2 недели'), ('none', 'Без исключений')], default='none', max_length=20, verbose_name='Исключая последние')),
                ('posts_normalization', models.CharField(choices=[('last_100', 'Последние 100'), ('last_200', 'Последние 200'), ('last_300', 'Последние 300'), ('first_100', 'Первые 100'), ('first_200', 'Первые 200'), ('first_300', 'Первые 300')], default='last_100', max_length=20, verbose_name='Нормализовать посты')),
                ('view_coefficient', models.PositiveIntegerField(default=50, verbose_name='Охват ERR-24')),
                ('views_multiplier', models.PositiveIntegerField(default=1, verbose_name='Кратность оценки')),
                ('subscribers_count', models.PositiveIntegerField(default=0, verbose_name='Всего подписчиков')),
                ('last_successful_run', models.DateTimeField(blank=True, null=True, verbose_name='Дата последнего запуска')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='old_views_tasks', to='telegram.botsession', verbose_name='Бот')),
                ('settings', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='old_views_tasks', to='api.boostersettings', verbose_name='Настройки бустера')),
                ('target', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='old_views_tasks', to='api.mainentity', verbose_name='Канал-группа')),
            ],
            options={
                'verbose_name': 'Задача старых просмотров',
                'verbose_name_plural': 'Задачи старых просмотров',
                'db_table': 'old_views_tasks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OldViewsExpense',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('post_message_id', models.BigIntegerField(verbose_name='ID поста')),
                ('service_id', models.PositiveIntegerField(default=0, verbose_name='Айди тарифа')),
                ('views_count', models.PositiveIntegerField(verbose_name='Количество просмотров')),
                ('price', models.FloatField(verbose_name='Стоимость')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expenses', to='api.oldviewstask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Расход старых просмотров',
                'verbose_name_plural': 'Расходы старых просмотров',
                'db_table': 'old_views_expenses',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ReactionBoostTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('posts_count', models.PositiveIntegerField(default=10, help_text='Сколько постов обрабатывать за один запуск', verbose_name='Количество постов')),
                ('reactions_per_post', models.PositiveIntegerField(default=5, verbose_name='Реакций на пост')),
                ('reaction_type', models.CharField(choices=[('positive', 'Положительные'), ('neutral', 'Нейтральные'), ('negative', 'Отрицательные')], default='positive', max_length=20, verbose_name='Тип реакций')),
                ('frequency_days', models.PositiveIntegerField(default=1, help_text='Как часто запускать задачу, в днях', verbose_name='Частота запуска (дни)')),
                ('launch_time', models.TimeField(help_text='Локальное время для запуска задачи', verbose_name='Время запуска')),
                ('run_once_now', models.BooleanField(default=False, help_text='Если включено — задача выполнится один раз вне расписания', verbose_name='Запустить только сейчас')),
                ('last_launch', models.DateTimeField(blank=True, null=True, verbose_name='Дата последнего запуска')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reaction_boost_tasks', to='telegram.botsession', verbose_name='Бот')),
                ('target', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reaction_boost_tasks', to='api.mainentity', verbose_name='Канал-группа')),
            ],
            options={
                'verbose_name': 'Задача лайкера постов',
                'verbose_name_plural': 'Задачи лайкера постов',
                'db_table': 'reaction_boost_tasks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ReactionRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('post_message_id', models.BigIntegerField(verbose_name='ID поста в Telegram')),
                ('bot_id', models.BigIntegerField(verbose_name='ID бота, поставившего реакцию')),
                ('reaction', models.CharField(max_length=50, verbose_name='Реакция (emoji)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='records', to='api.reactionboosttask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Реакция',
                'verbose_name_plural': 'Реакции',
                'db_table': 'reaction_records',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SubscribersBoostTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('check_interval', models.PositiveIntegerField(default=60, verbose_name='Частота проверки (минуты)')),
                ('max_subscribers', models.PositiveIntegerField(default=0, verbose_name='Максимальное количество подписчиков')),
                ('notify_on_exceed', models.BooleanField(default=False, verbose_name='Оповещать при превышении лимита')),
                ('tracking_mode', models.CharField(choices=[('unsubs', 'Отписки'), ('total', 'Всего')], default='unsubs', max_length=10, verbose_name='Учёт')),
                ('last_processed_event_id', models.BigIntegerField(blank=True, null=True, verbose_name='ID последнего обработанного системного сообщения')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscribers_boost_tasks', to='telegram.botsession', verbose_name='Бот')),
                ('settings', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='subscribers_boost_tasks', to='api.boostersettings', verbose_name='Настройки бустера')),
                ('target', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscribers_boost_tasks', to='api.mainentity', verbose_name='Канал-группа')),
            ],
            options={
                'verbose_name': 'Задача нормализатора подписчиков',
                'verbose_name_plural': 'Задачи нормализатора подписчиков',
                'db_table': 'subscribers_boost_tasks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SubscribersBoostExpense',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subscribers_count', models.PositiveIntegerField(verbose_name='Количество подписчиков')),
                ('service_id', models.PositiveIntegerField(default=0, verbose_name='Айди тарифа')),
                ('price', models.FloatField(verbose_name='Стоимость')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expenses', to='api.subscribersboosttask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Расход подписчиков',
                'verbose_name_plural': 'Расходы подписчиков',
                'db_table': 'subscribers_boost_expenses',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SubscriberList',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subscriber_ids', models.JSONField(verbose_name='Список ID подписчиков')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscriber_lists', to='api.subscribersboosttask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Список подписчиков',
                'verbose_name_plural': 'Списки подписчиков',
                'db_table': 'subscriber_lists',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SubscribersCheck',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_subscribers', models.PositiveIntegerField(verbose_name='Всего подписчиков')),
                ('new_subscriptions', models.PositiveIntegerField(default=0, verbose_name='Новые подписки')),
                ('new_unsubscriptions', models.PositiveIntegerField(default=0, verbose_name='Отписки')),
                ('unsubscribed_users', models.JSONField(default=list, verbose_name='Список ID отписавшихся')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='checks', to='api.subscribersboosttask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Проверка подписчиков',
                'verbose_name_plural': 'Проверки подписчиков',
                'db_table': 'subscribers_checks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SystemNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_code', models.CharField(db_index=True, max_length=11, unique=True)),
                ('title', models.CharField(max_length=255, verbose_name='Заголовок')),
                ('message', models.TextField(verbose_name='Сообщение')),
                ('details', models.JSONField(blank=True, default=dict, verbose_name='Детали')),
                ('status', models.CharField(choices=[('NEW', 'Новое'), ('ACKNOWLEDGED', 'Принято к сведению'), ('IN_PROGRESS', 'В работе'), ('RESOLVED', 'Решено'), ('DEFERRED', 'Отложено'), ('IGNORED', 'Игнорируется')], default='NEW', max_length=15)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('task_id', models.IntegerField(blank=True, null=True, verbose_name='ID задачи')),
                ('external_id', models.CharField(blank=True, max_length=100, verbose_name='Внешний ID')),
                ('source', models.CharField(blank=True, max_length=100, verbose_name='Источник')),
                ('stack_trace', models.TextField(blank=True, verbose_name='Трассировка')),
                ('entity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='api.mainentity')),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.notificationmodule')),
                ('notification_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='api.notificationtype')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='NotificationAction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(max_length=50, verbose_name='Действие')),
                ('comment', models.TextField(blank=True, verbose_name='Комментарий')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='actions', to='api.systemnotification')),
            ],
        ),
        migrations.CreateModel(
            name='TaskTime',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('weekday', models.PositiveSmallIntegerField()),
                ('seconds_from_day_start', models.PositiveIntegerField()),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='times', to='api.entityposttask')),
            ],
        ),
        migrations.CreateModel(
            name='ViewBoostTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('view_coefficient', models.PositiveIntegerField(default=50, help_text='Процент от подписчиков, который должен быть достигнут за 24 часа (0-100%)', verbose_name='Коэффициент просмотров')),
                ('normalization_mode', models.CharField(choices=[('daily', 'Суточный режим'), ('morning', 'Утренний режим'), ('day', 'Дневной режим'), ('evening', 'Вечерний режим'), ('night', 'Ночной режим')], default='daily', max_length=20, verbose_name='Режим нормализации')),
                ('show_expenses_for', models.CharField(choices=[('month', 'Месяц'), ('week', 'Неделя')], default='month', max_length=10, verbose_name='Показывать расход за')),
                ('subscribers_count', models.PositiveIntegerField(default=0, verbose_name='Количество подписчиков')),
                ('day_before_yesterday_percent', models.FloatField(default=0.0, verbose_name='Позавчера (%)')),
                ('yesterday_percent', models.FloatField(default=0.0, verbose_name='Вчера (%)')),
                ('today_percent', models.FloatField(default=0.0, verbose_name='Сегодня (%)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='view_boost_tasks', to='telegram.botsession', verbose_name='Бот')),
                ('settings', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='view_boost_tasks', to='api.boostersettings', verbose_name='Настройки бустера')),
                ('target', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='view_boost_tasks', to='api.mainentity', verbose_name='Канал-группа')),
            ],
            options={
                'verbose_name': 'Задача умного просмотра',
                'verbose_name_plural': 'Задачи умного просмотра',
                'db_table': 'view_boost_tasks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ViewBoostExpense',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('views_count', models.PositiveIntegerField(verbose_name='Количество просмотров')),
                ('price', models.FloatField(verbose_name='Цена за хранение')),
                ('service_id', models.PositiveIntegerField(default=0, verbose_name='Айди тарифа')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expenses', to='api.viewboosttask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Расход умного просмотра',
                'verbose_name_plural': 'Расходы умного просмотра',
                'db_table': 'view_boost_expenses',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ActivePostTracking',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('message_id', models.BigIntegerField(verbose_name='ID сообщения')),
                ('post_type', models.CharField(choices=[('morning', 'Утренний'), ('main', 'Основной')], max_length=10, verbose_name='Тип поста')),
                ('total_views_needed', models.PositiveIntegerField(verbose_name='Всего просмотров нужно')),
                ('publish_time', models.DateTimeField(verbose_name='Время публикации')),
                ('completed_hours', models.JSONField(default=list, help_text="Список обработанных часов в формате [('day1', 1), ('day2', 7), ...]", verbose_name='Обработанные часы')),
                ('is_completed', models.BooleanField(default=False, verbose_name='Завершено')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Завершено в')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='active_posts', to='api.viewboosttask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Активное отслеживание поста',
                'verbose_name_plural': 'Активные отслеживания постов',
                'db_table': 'view_boost_active_posts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='BlondinkaSchedule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('day_of_week', models.PositiveSmallIntegerField(choices=[(0, 'Понедельник'), (1, 'Вторник'), (2, 'Среда'), (3, 'Четверг'), (4, 'Пятница'), (5, 'Суббота'), (6, 'Воскресенье')], verbose_name='День недели')),
                ('publish_time', models.TimeField(verbose_name='Время публикации')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активен')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='schedules', to='api.blondinkatask', verbose_name='Задача')),
            ],
            options={
                'verbose_name': 'Расписание публикации',
                'verbose_name_plural': 'Расписания публикаций',
                'db_table': 'blondinka_schedules',
                'ordering': ['day_of_week', 'publish_time'],
                'unique_together': {('task', 'day_of_week', 'publish_time')},
            },
        ),
        migrations.CreateModel(
            name='BlondinkaTaskDialog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активен в задаче')),
                ('order', models.PositiveIntegerField(default=0, verbose_name='Порядок')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('dialog', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='task_dialogs', to='api.blondinkadialog')),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='task_dialogs', to='api.blondinkatask')),
            ],
            options={
                'db_table': 'blondinka_task_dialogs',
                'ordering': ['order'],
                'unique_together': {('task', 'dialog')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='entitycategory',
            unique_together={('entity', 'category')},
        ),
        migrations.CreateModel(
            name='DailyPinningTask',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активность')),
                ('post_link', models.CharField(max_length=512, verbose_name='Ссылка на пост для закрепления')),
                ('start_time', models.TimeField(verbose_name='Время начала интервала')),
                ('end_time', models.TimeField(verbose_name='Время окончания интервала')),
                ('unpin_after_minutes', models.PositiveIntegerField(help_text='Через сколько минут откреплять сообщение', verbose_name='Откреплять через (минут)')),
                ('delete_notification_after_minutes', models.PositiveIntegerField(help_text='Через сколько минут удалять системное уведомление о закреплении', verbose_name='Удалять уведомление через (минут)')),
                ('total_yesterday', models.PositiveIntegerField(default=0, verbose_name='Всего постов вчера')),
                ('dummy_yesterday', models.PositiveIntegerField(default=0, verbose_name='Пустышек вчера')),
                ('total_today', models.PositiveIntegerField(default=0, verbose_name='Всего постов сегодня')),
                ('dummy_today', models.PositiveIntegerField(default=0, verbose_name='Пустышек сегодня')),
                ('pinned_at', models.DateTimeField(blank=True, null=True, verbose_name='Когда закреплено')),
                ('unpinned_at', models.DateTimeField(blank=True, null=True, verbose_name='Когда откреплено')),
                ('notification_deleted_at', models.DateTimeField(blank=True, null=True, verbose_name='Когда удалено уведомление')),
                ('pinned_message_id', models.BigIntegerField(blank=True, null=True, verbose_name='ID закрепленного сообщения')),
                ('last_cycle_date', models.DateField(blank=True, null=True, verbose_name='Дата последнего цикла')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('bot', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='daily_pinning_tasks', to='telegram.botsession', verbose_name='Бот')),
                ('channel', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='daily_pinning_tasks', to='api.mainentity', verbose_name='Канал')),
            ],
            options={
                'verbose_name': 'Задача ежедневного закрепления',
                'verbose_name_plural': 'Задачи ежедневного закрепления',
                'db_table': 'daily_pinning_tasks',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['is_active'], name='daily_pinni_is_acti_f0912e_idx'), models.Index(fields=['channel'], name='daily_pinni_channel_2a2cfc_idx'), models.Index(fields=['bot'], name='daily_pinni_bot_id_da8d77_idx'), models.Index(fields=['last_cycle_date'], name='daily_pinni_last_cy_a46820_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='systemnotification',
            index=models.Index(fields=['status', 'created_at'], name='api_systemn_status_8d0811_idx'),
        ),
        migrations.AddIndex(
            model_name='systemnotification',
            index=models.Index(fields=['module', 'notification_type'], name='api_systemn_module__098358_idx'),
        ),
        migrations.AddIndex(
            model_name='systemnotification',
            index=models.Index(fields=['entity', 'created_at'], name='api_systemn_entity__4d758a_idx'),
        ),
        migrations.AddIndex(
            model_name='viewboosttask',
            index=models.Index(fields=['is_active'], name='view_boost__is_acti_72003f_idx'),
        ),
        migrations.AddIndex(
            model_name='viewboosttask',
            index=models.Index(fields=['target'], name='view_boost__target__6c5f68_idx'),
        ),
        migrations.AddIndex(
            model_name='viewboosttask',
            index=models.Index(fields=['bot'], name='view_boost__bot_id_9412af_idx'),
        ),
        migrations.AddIndex(
            model_name='viewboosttask',
            index=models.Index(fields=['normalization_mode'], name='view_boost__normali_4cca1a_idx'),
        ),
        migrations.AddIndex(
            model_name='viewboostexpense',
            index=models.Index(fields=['task'], name='view_boost__task_id_749e99_idx'),
        ),
        migrations.AddIndex(
            model_name='viewboostexpense',
            index=models.Index(fields=['created_at'], name='view_boost__created_62ac03_idx'),
        ),
        migrations.AddIndex(
            model_name='activeposttracking',
            index=models.Index(fields=['task'], name='view_boost__task_id_861b71_idx'),
        ),
        migrations.AddIndex(
            model_name='activeposttracking',
            index=models.Index(fields=['message_id'], name='view_boost__message_44c89d_idx'),
        ),
        migrations.AddIndex(
            model_name='activeposttracking',
            index=models.Index(fields=['is_completed'], name='view_boost__is_comp_819921_idx'),
        ),
        migrations.AddIndex(
            model_name='activeposttracking',
            index=models.Index(fields=['publish_time'], name='view_boost__publish_d2e0ea_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='activeposttracking',
            unique_together={('task', 'message_id')},
        ),
    ]
