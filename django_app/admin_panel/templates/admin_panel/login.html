{% extends "adminlte/base.html" %}

{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height: 100vh;">
  <div class="login-box" style="width: clamp(380px, 92vw, 500px);">
    <div class="login-logo">
      <b>–ü–∞–Ω–µ–ª—å</b> –í—Ö–æ–¥
    </div>

    <div class="card shadow">
      <div class="card-body login-card-body">
        <form method="post" novalidate>
          {% csrf_token %}

          {% for field in form %}
            <div class="form-group">
              <label for="{{ field.id_for_label }}" class="d-block mb-1">{{ field.label }}</label>

              {% if field.name == "password" %}
                <div class="input-group">
                  {{ field }}
                  <div class="input-group-append">
                    <span class="input-group-text" id="togglePassword" style="cursor:pointer;">
                      <i class="fas fa-eye"></i>
                    </span>
                  </div>
                </div>
              {% else %}
                {{ field }}
              {% endif %}

              {% if field.errors %}
                <div class="text-danger small mt-1">{{ field.errors }}</div>
              {% endif %}
            </div>
          {% endfor %}

          <button type="submit" class="btn btn-primary btn-block">–í–æ–π—Ç–∏</button>
        </form>
      </div>
    </div>
  </div>
</div>

<style>
  /* –õ–µ–π–±–ª—ã —Å—Ç—Ä–æ–≥–æ –Ω–∞–¥ –ø–æ–ª—è–º–∏ */
  .login-card-body .form-group label {
    display: block;
    margin-bottom: .35rem;
    font-weight: 500;
  }

  /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞, –±–µ–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –∫–ª–∞—Å—Å–∞–º –≤–∏–¥–∂–µ—Ç–æ–≤ */
  .login-card-body .form-group input,
  .login-card-body .form-group select,
  .login-card-body .form-group textarea {
    display: block;
    width: 100%;
    box-sizing: border-box;
    height: calc(2.5rem + 2px);
    font-size: 1rem;
  }

  /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—à–∏—Ä–µ */
  .login-box { width: clamp(380px, 92vw, 500px); }

  /* –ß—Ç–æ–±—ã –∏ –±–µ–∑ Bootstrap input-group —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ */
  .login-card-body .input-group {
    display: flex;
    align-items: stretch;
    width: 100%;
  }

  /* –ò–Ω–ø—É—Ç –≤–Ω—É—Ç—Ä–∏ input-group –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ 100%, –∞ –¥–∞—ë–º –µ–º—É –≥–∏–±–∫–æ—Å—Ç—å */
  .login-card-body .input-group > input {
    flex: 1 1 auto;
    width: auto;      /* –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ–º width:100% —Å–≤–µ—Ä—Ö—É */
    min-width: 0;     /* –Ω–µ —Ä–∞—Å–ø–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
    height: calc(2.5rem + 2px);
    font-size: 1rem;
  }

  .login-card-body .input-group-append {
    flex: 0 0 auto;
    display: flex;
  }
  
  .login-card-body .input-group > input.form-control {
  flex: 1 1 auto;
  width: 0;        /* üîπ –∫–ª—é—á ‚Äî –∑–∞—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ flex */
  min-width: 0;    /* üîπ –Ω–µ –¥–∞—ë–º —Ä–∞—Å–ø–∏—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
  max-width: 100%; /* üîπ –Ω–µ –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø—Ä–µ–¥–µ–ª—ã */
}


  .login-card-body .input-group-append .input-group-text {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: .5rem .6rem;
    line-height: 1;
    height: calc(2.5rem + 2px);
    border: 1px solid rgba(0,0,0,.1);
    border-left: none;      /* —Å–ª–∏–≤–∞–µ—Ç—Å—è —Å –∏–Ω–ø—É—Ç–æ–º */
    border-radius: .25rem;  /* –µ—Å–ª–∏ —É –≤–∞—Å bootstrap ‚Äî –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç—Å—è –µ–≥–æ —Å—Ç–∏–ª—å */
  }

  /* –ù–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ */
  @media (max-width: 420px) {
    .login-box { width: 92vw !important; }
  }
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("togglePassword");
  if (!toggle) return;

  const group = toggle.closest(".input-group");
  const input = group ? group.querySelector("input[name='password']") : null;
  const icon  = toggle.querySelector("i");

  if (!input || !icon) return;

  toggle.addEventListener("click", () => {
    const isHidden = input.type === "password";
    input.type = isHidden ? "text" : "password";
    icon.classList.toggle("fa-eye", !isHidden);
    icon.classList.toggle("fa-eye-slash", isHidden);
  });
});
</script>
{% endblock %}
